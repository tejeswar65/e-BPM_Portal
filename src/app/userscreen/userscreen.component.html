<!-- <div class="row h-100 align-items-center justify-content-center" style="background-color: rgb(180, 180, 180);">
<span style="font-size: 80px; color: rgb(100, 100, 100);">User Dashboard</span>
</div> -->
<div class="back" style="background-color: #f0f2f5; height: 100vh">
<div class="container-fluid">
<div class="row">
<nav class="navbar offset-md-3 offset-lg-2 col-md-9 col-lg-10 sticky-top flex-md-nowrap p-0 nav-1" >
  <span class="navbar-brand col-md-3 col-lg-2 mr-0 mt-2 px-3" href="#" style="margin-left: 10px;"><img src="assets/Images/eaiesb_logo.png" style="width: 80px;">
  </span>
  <ul class="navbar-nav px-3">
    <li class="nav-item text-nowrap">
      <button type="button" class="btn btn-outline-danger btn-3" (click)="signOut()">Sign Out</button>
    </li>
  </ul>
</nav>
</div>
</div>
<div class="container-fluid">
  <div class="row">
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
      <div class="card">
        <div class="card-body text-center align-items-center justify-content-center">
          <div class="imgcontainer" style="box-shadow:  0px 0px 16px rgba(0, 0, 0, 0.2);">
            <span class="helper"></span>
            <img class="image" src="assets/Images/man.jpg" class="card-img-top text-center" alt="...">
          </div>
          <span class="card-title" style="margin-top: 20px; font-weight: bold; display: block; color:rgba(255, 255, 255, 0.72)">{{firstName}} {{lastName}}</span>
        </div>
      </div>
      <div class="sidebar-sticky">
            <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
              <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab" aria-controls="v-pills-home" aria-selected="true"><span data-feather="briefcase" style="width: 16px; height: 16px; margin-right: 6px;"></span>Tasks<span class="sr-only">(current)</span></a>
              <a class="nav-link" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile" role="tab" aria-controls="v-pills-profile" aria-selected="false"><span data-feather="file-text" style="width: 16px; height: 16px; margin-right: 6px;"></span>Reports</a>
              <a class="nav-link" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages" role="tab" aria-controls="v-pills-messages" aria-selected="false"><span data-feather="user" style="width: 16px; height: 16px; margin-right: 6px;"></span>Users</a>
              <a class="nav-link" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-settings" role="tab" aria-controls="v-pills-settings" aria-selected="false"><span data-feather="users" style="width: 16px; height: 16px; margin-right: 6px;"></span>Groups</a>
            </div>
        <!-- <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
          <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab" aria-controls="v-pills-home" aria-selected="true">Tasks</a>
          <a class="nav-link" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile" role="tab" aria-controls="v-pills-profile" aria-selected="false">Reports</a>
          <a class="nav-link" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages" role="tab" aria-controls="v-pills-messages" aria-selected="false">Users</a>
        </div> -->
      </div>
      </nav>
      <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4" style="box-shadow: -2px 0px 16px rgba(0, 0, 0, 0.2);" >
          <div class="tab-content" id="v-pills-tabContent">
            <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
              <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom" style="min-height: 72px;">
                <h1 class="h2">Tasks</h1>
                <div class="btn-toolbar mb-2 mb-md-0">
                    <button type="button" class="btn btn-outline-secondary btn-1" data-toggle="modal" data-target="#add_new_task">New Task</button>
                </div>
              </div>
              <div class="modal fade" id="add_new_task" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Add new task</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form>
                        <div class="form-group">
                          <input type="text" class="input form-control" placeholder="Task Title" id="lnameInput" (input)="taskTitle=$event.target.value">
                        </div>
                        <div class="form-group">
                          <textarea class="form-control" rows="4" id="comment" placeholder="Task Description" (input)="taskDesription=$event.target.value"></textarea>
                        </div>
                        <div class="form-row">
                          <div class="form-group col-md-4">
                            <input type="text" class="input form-control" placeholder="Assigned Type" id="fnameInput" (input)="assignedType=$event.target.value">
                          </div>
                          <div class="form-group col-md-8">
                            <input type="text" class="input form-control" placeholder="Assigned To" id="lnameInput" (input)="assignedTo=$event.target.value">
                          </div>
                        </div>
                        <span *ngIf="message">
                          {{message}}
                        </span>
                      </form>
                    </div>
                    <div class="modal-footer justify-content-between">
                      <button type="button" class="btn btn-outline-danger" style="border-radius: 20px;" data-dismiss="modal">Close</button>
                      <button type="button" class="btn btn-outline-primary" style="border-radius: 20px;" (click)="postTaskDetails()">Create Task</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="taskboard">
                <div class="taskboard-card">
                  <div class="taskboard-head text-uppercase">Pending</div>
                  <span *ngFor="let task of myTasks" >
                  <div class="taskboard-task" *ngIf="task.status!='started'" data-toggle="modal" data-target="#view_task" (click)="getTask(task._id)">
                    <div class="taskboard-task-title">{{task.taskTitle}}</div>
                    <div class="taskboard-task-description">{{task.taskDescription}}</div>
                    <div class="taskboard-task-created">{{task.createdBy}}</div>
                  </div>
                </span>
                </div>
                <div class="taskboard-card">
                  <div class="taskboard-head text-uppercase">to-do</div>
                  <span *ngFor="let task of myTasks" >
                  <div class="taskboard-task" *ngIf="task.status=='started'" data-toggle="modal" data-target="#view_task" (click)="getTask(task._id)">
                    <div class="taskboard-task-title">{{task.taskTitle}}</div>
                    <div class="taskboard-task-description">{{task.taskDescription}}</div>
                    <div class="taskboard-task-created">{{task.createdBy}}</div>
                  </div>
                </span>
                </div>
                <div class="taskboard-card">
                  <div class="taskboard-head text-uppercase">group tasks</div>
                  <span *ngFor="let task of myGroupTasks" >
                  <div class="taskboard-task" data-toggle="modal" data-target="#view_task" (click)="getTask(task._id)">
                    <div class="taskboard-task-title">{{task.taskTitle}}</div>
                    <div class="taskboard-task-description">{{task.taskDescription}}</div>
                    <div class="taskboard-task-created">{{task.createdBy}}</div>
                  </div>
                </span>
                </div>
                <div class="taskboard-card">
                  <div class="taskboard-head text-uppercase">reportees tasks</div>
                  <span *ngFor="let task of myReporteesTasks" >
                  <div class="taskboard-task" data-toggle="modal" data-target="#view_task" (click)="getTask(task._id)">
                    <div class="taskboard-task-title">{{task.taskTitle}}</div>
                    <div class="taskboard-task-description">{{task.taskDescription}}</div>
                    <div class="taskboard-task-created">{{task.createdBy}}</div>
                  </div>
                </span>
                </div>
              </div>
              <div class="modal fade" id="view_task" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Add new task</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body" *ngIf="viewTask">
                      <form>
                        <div class="form-row">
                        <div class="form-group col-md-6">
                          <label style="font-size: 16px;">Task Title</label>
                          <input type="text" class="input form-control" [placeholder]="viewTask['taskTitle']" id="lnameInput" disabled (input)="taskTitle=$event.target.value">
                        </div>
                        <div class="form-group col-md-6">
                          <label style="font-size: 16px;">Status</label>
                          <input type="text" class="input form-control" [placeholder]="viewTask['status']" id="lnameInput" disabled (input)="taskTitle=$event.target.value">
                        </div>
                      </div>
                        <div class="form-group">
                          <label style="font-size: 16px;">Task Description</label>
                          <textarea class="form-control" rows="3" id="comment" [placeholder]="viewTask['taskDescription']" disabled (input)="taskDesription=$event.target.value"></textarea>
                        </div>
                        <div class="form-row">
                          <div class="form-group col-md-8">
                            <label style="font-size: 16px;">Current Owner</label>
                            <input type="text" class="input form-control" [placeholder]="viewTask['currentOwner']" id="fnameInput" disabled (input)="assignedType=$event.target.value">
                          </div>
                          <div class="form-group col-md-4">
                            <label style="font-size: 16px;">Payload</label>
                            <input type="text" class="input form-control" [placeholder]="viewTask['payload']" id="lnameInput" disabled (input)="assignedTo=$event.target.value">
                          </div>
                        </div>
                        <div style="font-size: 16px;">Assigned Type: <strong>{{viewTask['assignedType']}}</strong></div>
                        <div style="font-size: 16px;">Assigned To: <strong>{{viewTask['assignedTo']}}</strong></div>
                        <div style="font-size: 16px;">Created by: <strong>{{viewTask['createdBy']}}</strong></div>
                        <div style="font-size: 16px;">Last Updated by: <strong>{{viewTask['updatedBy']}}</strong></div>
                        <div style="font-size: 16px;">Created Time: <strong>{{viewTask['createdTime'] | date:'medium'}}</strong></div>
                        <div style="font-size: 16px;">Last Updated Time: <strong>{{viewTask['updatedTime'] | date:'medium'}}</strong></div>
                      </form>
                    </div>
                    <div class="modal-footer justify-content-between">
                      <button type="button" class="btn btn-outline-danger" style="border-radius: 20px;" data-dismiss="modal">Close</button>
                      <button type="button" class="btn btn-outline-primary" style="border-radius: 20px;" >Update Task</button>
                    </div>
                  </div>
                </div>
              </div>
              <!-- <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3">
              <ul class="nav nav-pills " id="pills-tab" role="tablist">
                <li class="nav-item">
                  <a class="btn btn-secondary btn-2 active" id="myTasks-tab" data-toggle="pill" href="#myTasks" role="tab" aria-controls="myTasks" aria-selected="true">My Tasks</a>
                </li>
                <li class="nav-item">
                  <a class="btn btn-secondary btn-2" id="groupTasks-tab" data-toggle="pill" href="#groupTasks" role="tab" aria-controls="groupTasks" aria-selected="false">Group Tasks</a>
                </li>
                <li class="nav-item">
                  <a class="btn btn-secondary btn-2" id="reporteeTasks-tab" data-toggle="pill" href="#reporteeTasks" role="tab" aria-controls="reporteeTasks" aria-selected="false">Reportee Tasks</a>
                </li>
              </ul>
              <div class="btn-toolbar mb-2 mb-md-0">
                <button type="button" class="btn btn-sm btn-outline-secondary btn-3" (click)="reloadTasks()">Refresh</button>
                </div>
              </div>
              <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active" id="myTasks" role="tabpanel" aria-labelledby="myTasks-tab">
                  <div class="table-responsive p-3">
                    <table class="table table-sm m-0">
                      <thead>
                        <tr>
                          <th>Task Title</th>
                          <th>Task Description</th>
                          <th>Status</th>
                          <th>Created by</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let task of myTasks">
                          <td>{{task.taskTitle}}</td>
                          <td>{{task.taskDescription}}</td>
                          <td>{{task.status}}</td>
                          <td>{{task.createdBy}}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="tab-pane fade" id="groupTasks" role="tabpanel" aria-labelledby="groupTasks-tab">
                  <div class="table-responsive p-3" style="border-top-left-radius: 10px;">
                    <table class="table table-sm m-0">
                      <thead>
                        <tr>
                          <th>Task Title</th>
                          <th>Task Description</th>
                          <th>Status</th>
                          <th>Group</th>
                          <th>Created by</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let task of myGroupTasks">
                          <td>{{task.taskTitle}}</td>
                          <td>{{task.taskDescription}}</td>
                          <td>{{task.status}}</td>
                          <td>{{task.currentOwner}}</td>
                          <td>{{task.createdBy}}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="tab-pane fade" id="reporteeTasks" role="tabpanel" aria-labelledby="reporteeTasks-tab">
                  <div class="table-responsive p-3" style="border-top-left-radius: 10px;">
                    <table class="table table-sm m-0">
                      <thead>
                        <tr>
                          <th>Task Title</th>
                          <th>Task Description</th>
                          <th>Reportee ID</th>
                          <th>Status</th>
                          <th>Created by</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let task of myReporteesTasks">
                          <td>{{task.taskTitle}}</td>
                          <td>{{task.taskDescription}}</td>
                          <td>{{task.currentOwner}}</td>
                          <td>{{task.status}}</td>
                          <td>{{task.createdBy}}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div> -->
            </div>
            <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">Profile</div>
            <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">messages</div>
            <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">settings</div>
          </div>
        <!--  -->
        <!-- <div class="nav nav-pills" id="v-pills-tab" role="tablist">
          <a class="btn btn-secondary btn-2 active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab" aria-controls="v-pills-home" aria-selected="true">My Tasks</a>
          <a class="btn btn-secondary btn-2" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile" role="tab" aria-controls="v-pills-profile" aria-selected="false">Group Tasks</a>
          <a class="btn btn-secondary btn-2" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages" role="tab" aria-controls="v-pills-messages" aria-selected="false">Reportee Tasks</a>
        </div>-->


      </main>
    </div>
  </div>
</div>
